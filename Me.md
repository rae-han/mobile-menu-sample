Elixir Order(Table Order) - 모바일 주문 2022-07 ~ 2202-09


Elixir NFT(in SPC Wallet) 2022-01 ~ 2022-06
상품(미술, 음악, 영화, 사진)을 블록체인 시스템 기반으로 구매하여 소유권을 가지는 웹뷰를 개발했다.
결제 수단으로 이더리움과 파일코인이 있었는데 파일 코인 결제시 시간이 오래 걸려 결과 화면을 바로 띄우지 못하는 문제가 있었다. 대안으로 진행되고 있다는 결과 화면을 띄운 후 서버에 4~6초 간격으로 인터벌로 요청을 날려 완료시 화면을 바꿔주는 방법으로 수정했다. 최후에는 진행 중 결과화면을 띄우는 것은 똑같지만 socket.io 라이브러리를 이용하여 서버에서 결과 완료 메세지를 보내면 완료 화면으로 넘어가게 개선했다.
추가로 서버에서 데이터를 필요한 만큼 주는 것이 아니라 한번에 내려줬는데 이런 이유로 페이지 내에서 카테고리 변경 시 비 동기적으로 메뉴 리스트 데이터를 리렌더링 할 때 글자가 먼저 보이고 레이아웃이 밀려나면서 이미지가 뜨는 현상이 있었다. 
이를 해결하기 위한 방법으로 첫 단계는 next.js 의 image 컴포넌트를 사용하여 컴포넌트가 실제로 화면에 보일 때 불러올 수 있도록 지연 로딩 시켜줬다. 추가로 next.js 에서 화면에 맞는 사이즈로 이미지를 응답해주는 간접적인 효과도 얻을 수 있었다.
다음 단계로 스켈레톤 로딩 대신 최대한 이미지와 비슷한 이미지를 보여주고 싶었다. 그래서 Node.js 생태계의 sharp 라는 패키지를 사용하여 리사이징한 이미지와 원본 이미지를 AWS S3에 저장한 후, 리사이징 된 흐릿한 이미지를 보여주다가 원본 이미지가 모두 로드되면 onload 이벤트를 통해 원본 이미지로 갈아끼우는 방법을 사용했다. 마지막으로 이미지를 올리는 주체가 내가 개발한 사용자 페이지가 아닌 관리자 페이자여서 바로 적용을 할수 없었는데 AWS의 Lambda에 해당 함수를 올려서 S3에 이미지를 올릴때 해당 함수를 이용할 수 있도록 요청하여 해결했다.

PG사 및 카드사 계약을 위한 웹 사이트 제공
심사를 위해서는 크게 판매 상품, 판매 금액, 사업자 정보, 환불 정책이 필요했다. 이를 위해 관리자 페이지에서 사이트 정보(이름, 로고, 사업자 정보 등)와 상품 분류, 해당 분류에 해당하는 상품들을 등록하게 했고, 환불 정책 같은 경우 일괄된 양식을 사용하면서 사업자 정보나 전화번호 같이 사이트 마다 다른 정보는 서버에서 다시 받아 표기해줬다.
웹앱 실제 주소와는 별개로 심사할 때는 각기 다른 도메인 네임을 써야했다. 그래서 첫 번째로 우선 서로 다른 도메인 네임을 모두 웹앱으로 연결시켜 준 뒤, 웹앱에서는 해당 도메임 네임을 키로 요청을 하여 도메인에 맞는 정보를 응답 받도록 했다.

https://foo.dev.menu.elixirpay.co.kr

TheSafer 간소화 관리자 앱 2021-03 ~ 2021-03
기존 관리자 웹 페이지의 경우 체온 측정에 관련된 설정보다 매장 설정과 정산 관련된 데이터가 많았다. 하지만 운영 시간 중간에는 대부분 체온 층정에 관련된 설정과 내역을 보는데 관리자 페이지에 데스크탑 위주의 디자인이 돼 있고 너무 많은 메뉴 때문에 불편했다. 그런 이유로 React-Native를 이용하여 로그인, 회원가입, 장치 개통, 체온 측정 기능만 있는 네이티브 앱을 개발했다. 
회원가입을 제외한 나머지 기능은 기존의 API를 재활용했으며, 회원가입 같은 경우 나이스 인증 모듈을 붙여야해서 웹뷰를 이용하여 구현했다.

TheSafer(체온 측정이 포함된 키오스크) 관리자 페이지 2020-03 ~ 2021-09
키오스크를 사용하는 매장 설정(포인트 적립률, 초기 화면 이미지, 기본 이미지)부터 시작해서 각 매장의 카테고리, 메뉴 그리고 각 메뉴에 대한 상세 옵션을 설정 가능하도록 개발했다. 또한 주문, 결제, 취소에 관한 내역과 주문 취소, 결제 환불을 요청할 수 있게 했으며 정산 내용도 표시해 주었다.
운영사(자사), 매장 관리자, 고객 센터에 따라 권한을 차등 부여. 매장 관리자 같은 경우에는 총판, 지사, 대리점, 가맹점으로 나뉘어 한번 더 권한을 차등 부여 함.
또한 이 키오스크가 온도 측정 장치가 포함 된 키오스크 였는데 실내외 상황과 계절, 당일 기상 상황에 따라 체온 측정에 오차가 생겼다. 그래서 실내외는 설정으로 구분하도록 하고 실외에서 바로 들어오는 실내나 실외에 설치된 키오스크는 기상청에서 제공해주는 체감온도를 이용하여 측정 값에 약간의 여유를 주도록 했다.

수기 결제 2019-08 ~ 2022-11
수기 결제를 할수 있는 웹앱을 개발했다.
결제 과정 중 카드 번호 같은 민감한 정보는 양방향 암호화를 통해 서버에 미리 보내둔 후 jwt를 이용하여 서버 세션에 있는 데이터를 계속 사용할 수 있게 했다.
그리고 카드번호 구성을 통해 해외 카드 결제는 VISA, Master, JCB로만 가능하도록 개선했다. 개선 전에는 메세지로 해당 카드만 가능하다 했지만 확인하지 않고 번호를 입력 후 카드 결제가 안된다는 메세지를 받는 사용자가 있었다. 덕분에 해외 카드 결제의 경우 CVV/CVC 입력 칸이 필요했는데 해당 기능도 카드 번호로 분기하여 개발했다.
결제 과정 
jwt토큰으로 서버 세션에 데이터를 저장
카드 번호 양방향 암호화
가상 키보드
잘못된 카드 번호 카드 번호 구성으로 해외카드 구별

키오스크 정산 시스템 관리자 페이지 2018-10 ~ 2019-06
키오스크와 연동된 정산 시스템 관리자 웹앱을 개발했다. 크게 키오스크 설정과 메뉴에 관련된 기능과, 주문, 결제에 관련된 기능 두 가지로 나눠졌다. 
대부분 서버에서 데이터 처리를 해서 관리자 페이지에서 할 일은 데이터를 표시하고, 설정 값이나 주문, 결제에 관련된 주문 취소, 환불 요청을 보내주면서 해당 내역을 엑셀로 다운 받을수 있게 하면 됐다. 엑셀 파일 같은 경우 Sheet.js 라이브러리를 이용하면 서버에서 받은 JSON 데이터를 파일로 만들 수 있고 반대로 파일을 넣어서 JSON 데이터로 쉽게 만들수 있었다.
문제는 엑셀 파일을 서버에 올릴때 웹페이지에서 확인 후 올리도록 했는데, 데이터 10만행 기준으로 렌더링 시간이 약 30초가 걸려 브라우저가 멈춘 것 같은 착각을 주었다.
첫번째 해결 방법으로 인피니티 스크롤을 이용하여 데이터는 미리 JSON으로 가지고 있지만 지금 당장 볼 부분만 렌더링되도록 했다. 이 방법의 문제는 사용자가 곧장 가장 아래 행으로 가고 싶을 때 스크롤 하는 시간에 중간 중간 렌더링 되는 시간까지 더해진다는 점이었다. 
두번째 방법으로 데이터를 적당한 양으로 잘라서 리액트에 내장 돼 있는 Suspense 컴포넌트와 lazy 함수를 이용하는 것이다. 해당하는 방법은 스크롤을 내렸을때 데이터가 바로 보이지 않을 수 있으나 그래도 원하는 지점으로 바로 갈 순 있었다.
추가로 데이터를 수정할 수 있도록 추가개발 하였는데 이때는 React에 내장 돼 있는 memo 함수를 이용하여 필요한 부분만 랜더링 할 수 있도록 했다.
결과적으로는 페이지네이션으로 수정하여 필요한 부분만 보여지도록 했다.


metapine - 가상계좌 발급 웹뷰 및 관리자 페이지 2018-04 ~ 2018-09
결제 금액, 환불 계좌, 휴대폰 번호를 입력 하면 1회성 가장계좌를 발급해주는 웹앱을 개발했다.

수기ㄹ제 양방향 암호화

elixir form

카드 결제 심사 몰 -
https://foo.dev.menu.elixirpay.co.kr

컴포넌트화

공휴일 관리

#### 키

영수증 프린터 페이지 2018-02 ~ 2018-03
결제 영수증을 출력하는 페이지를 개발했다.
웹에서 print 함수를 사용하게 되면 전체 페이지가 출력되는데 요구 사항은 정해진 폭의 영수증의 정보 부분만 제한하여 출력을 해야 했다. beforeprint와 afterprint 이벤트를 사용하여 이벤트 전 후로 영수증 부분만 웹에 남겼다가 다시 복구하는 식으로 개발했다.
위 방법으로 구현 했을 때 화면이 깜빡이는 현상이 있어, 영수증 출력 시 두 가지 방법으로 회피하려 했다. 첫 번재는 새 창을 띄워서 원하는 내용만 보여주면서 출력할 수 있게 하는 방식이며, 두번째는 기존 화면을 보여주지만 영수증 출력 시 사용할 화면을 미리 렌더링은 하되 사용자에게 안보이도록 위치를 잡은 뒤, 프린터를 하는 순간 미리 렌더링 된 출력할 화면으로 덮어주고 다시 숨기는 방법으로 개선했다.

네이티브 앱 내 상품권 몰 웹뷰 마이그레이션 2017-08 ~ 2018-01
기존 AngularJS와 jQuery로 개발된 프로젝트를 Angular, ngrx, sass 스택을 사용하여 CSR으로 개발 했다. 상품권 종류를 선택하고 금액을 선택한 다음 네이티브 앱에 있는 포인트나 등록된 카드를 사용하여 결제하는 간단한 웹뷰 였다. 인증은 네이티브 앱에서 헤더로 토큰을 전달 받고 그 토큰을 서버에 같이 넘겨주는 식으로 구현했다.
reset.css와 normalize.css 외에도 iOS와 Android에서의 운영체제 UI 백엔드 차이로 일어나는 문제에대해 고민하고 최대한 표준화했다. 커스텀 셀렉트 박스를 사용하고, 숫자 비밀번호 입력 화면에서 키패드를 직접 만들어서 사용하는 방법 등을 사용했다. 그 밖에 OS에 따라서 뒤로가기 버튼 유무도 다르게 했다.
추가로 기존 프로젝트 같은 경우 선택된 메뉴 아래 밑줄이나 디바이스 화면과 페이지 컨텐츠 크기에 따라 푸터를 스크롤 가장 아래 보내줄지 하단 고정을 해줄지 같은 문제를 자바스크립트 코드를 이용하여 재조정 하게 개발돼 있었다. 이를 선택된 메뉴 밑줄 같은 경우 CSS의 자식, 형제 선택자와 traslate 같은 속성을 이용해 해결했고, 푸터 같은 경우에는 position 속성 대신 전체 레이아웃을 flex로 변경하여 컨텐츠가 가득 차 있을 경우 자동으로 아래쪽으로 이동하고, 그게 아니라면 하단으로 고정되게 함으로 깜빡거림을 없애줬다.
